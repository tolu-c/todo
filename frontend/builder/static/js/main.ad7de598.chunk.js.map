{"version":3,"sources":["App.js","index.js"],"names":["App","props","state","todoList","activeItem","id","title","completed","editing","fetchTasks","bind","handleChange","handleSubmit","getCookie","startEdit","deleteItem","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","this","console","log","fetch","then","response","json","data","setState","e","value","target","preventDefault","csrftoken","url","method","headers","body","JSON","stringify","catch","error","task","tasks","self","className","onSubmit","style","flex","onChange","type","placeholder","map","index","onClick","Component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ad7de598.chunk.js","sourcesContent":["import \"./App.css\";\r\nimport React, { Component } from \"react\";\r\n\r\nexport default class App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      todoList: [],\r\n      activeItem: {\r\n        id: null,\r\n        title: \"\",\r\n        completed: false,\r\n      },\r\n      editing: false,\r\n    };\r\n\r\n    this.fetchTasks = this.fetchTasks.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.getCookie = this.getCookie.bind(this);\r\n    this.startEdit = this.startEdit.bind(this);\r\n    this.deleteItem = this.deleteItem.bind(this);\r\n    this.completed = this.completed.bind(this);\r\n  }\r\n\r\n  getCookie(name) {\r\n    let cookieValue = null;\r\n    if (document.cookie && document.cookie !== \"\") {\r\n      let cookies = document.cookie.split(\";\");\r\n      for (let i = 0; i < cookies.length; i++) {\r\n        let cookie = cookies[i].trim();\r\n        if (cookie.substring(0, name.length + 1) === name + \"=\") {\r\n          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return cookieValue;\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.fetchTasks();\r\n  }\r\n\r\n  fetchTasks() {\r\n    console.log(\"fetching...\");\r\n\r\n    fetch(\"https://djangoxreact-todo-app.herokuapp.com/api/task-list/\")\r\n      .then((response) => response.json())\r\n      .then((data) =>\r\n        this.setState({\r\n          todoList: data,\r\n        })\r\n      );\r\n  }\r\n\r\n  handleChange(e) {\r\n    let value = e.target.value;\r\n\r\n    this.setState({\r\n      activeItem: {\r\n        ...this.state.activeItem,\r\n        title: value,\r\n      },\r\n    });\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    e.preventDefault();\r\n    console.log(\"Item:\", this.state.activeItem);\r\n    let csrftoken = this.getCookie(\"csrftoken\");\r\n\r\n    let url = \"https://djangoxreact-todo-app.herokuapp.com/api/task-create/\";\r\n\r\n    if (this.state.editing === true) {\r\n      url = `https://djangoxreact-todo-app.herokuapp.com/api/task-update/${this.state.activeItem.id}/`;\r\n      this.setState({\r\n        editing: false,\r\n      });\r\n    }\r\n    fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n        \"X-CSRFToken\": csrftoken,\r\n      },\r\n      body: JSON.stringify(this.state.activeItem),\r\n    })\r\n      .then((response) => {\r\n        this.fetchTasks();\r\n        this.setState({\r\n          activeItem: {\r\n            id: null,\r\n            title: \"\",\r\n            completed: false,\r\n          },\r\n        });\r\n      })\r\n      .catch(function (error) {\r\n        console.log(`Error: ${error}`);\r\n      });\r\n  }\r\n\r\n  startEdit(task) {\r\n    this.setState({\r\n      activeItem: task,\r\n      editing: true,\r\n    });\r\n  }\r\n\r\n  deleteItem(task) {\r\n    let csrftoken = this.getCookie(\"csrftoken\");\r\n    fetch(`https://djangoxreact-todo-app.herokuapp.com/api/task-delete/${task.id}/`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n        \"X-CSRFToken\": csrftoken,\r\n      },\r\n    }).then((response) => {\r\n      this.fetchTasks();\r\n    });\r\n  }\r\n\r\n  completed(task) {\r\n    task.completed = !task.completed;\r\n    console.log(`task: ${task.completed}`);\r\n    let csrftoken = this.getCookie(\"csrftoken\");\r\n    let url = `https://djangoxreact-todo-app.herokuapp.com/api/task-update/${task.id}/`;\r\n\r\n    fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n        \"X-CSRFToken\": csrftoken,\r\n      },\r\n      body: JSON.stringify({ completed: task.completed, title: task.title }),\r\n    }).then(() => {\r\n      this.fetchTasks();\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let tasks = this.state.todoList;\r\n    let self = this;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <div id=\"task-container\">\r\n          <div id=\"form-wrapper\">\r\n            <form id=\"form\" onSubmit={this.handleSubmit}>\r\n              <div className=\"flex-wrapper\">\r\n                <div style={{ flex: 6 }}>\r\n                  <input\r\n                    className=\"form-control\"\r\n                    onChange={this.handleChange}\r\n                    id=\"title\"\r\n                    type=\"text\"\r\n                    placeholder=\"Add Task\"\r\n                    name=\"title\"\r\n                    value={this.state.activeItem.title}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ flex: 1 }}>\r\n                  <input id=\"submit\" className=\"btn\" type=\"submit\" />\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n\r\n          <div id=\"list-wrapper\">\r\n            {tasks.map(function (task, index) {\r\n              return (\r\n                <div key={index} className=\"task-wrapper flex-wrapper\">\r\n                  <div onClick={() => self.completed(task)} style={{ flex: 7 }}>\r\n                    {task.completed === false ? (\r\n                      <span>{task.title}</span>\r\n                    ) : (\r\n                      <strike>{task.title}</strike>\r\n                    )}\r\n                  </div>\r\n                  <div style={{ flex: 1 }}>\r\n                    <button\r\n                      onClick={() => self.startEdit(task)}\r\n                      className=\"btn btn-sm btn-outline-info\"\r\n                    >\r\n                      Edit\r\n                    </button>\r\n                  </div>\r\n                  <div style={{ flex: 1 }}>\r\n                    <button\r\n                      onClick={() => self.deleteItem(task)}\r\n                      className=\"btn btn-sm btn-outline-dark delete\"\r\n                    >\r\n                      -\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}